üöÄ Astro Airflow Pipeline: Jupyter Notebook & Postgres Logging
‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Data Pipeline ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏ó‡∏µ‡πà‡∏ú‡∏™‡∏≤‡∏ô‡∏û‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á Airflow, Papermill, ‡πÅ‡∏•‡∏∞ Postgres ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏ö‡∏ö Parameterized

üõ†Ô∏è Tech Stack & Prerequisites
Astro CLI: ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Environment ‡∏ú‡πà‡∏≤‡∏ô Docker (Airflow 2.10+)

Papermill: ‡∏ï‡∏±‡∏ß‡∏Ç‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô Notebook ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ (Injection)

PostgreSQL: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö Metadata ‡πÅ‡∏•‡∏∞ Run Logs

Docker Desktop: ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á

üìÇ Project Structure
‚îú‚îÄ‚îÄ dags/
‚îÇ   ‚îî‚îÄ‚îÄ notebook_to_postgres.py   # ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏¥‡∏¢‡∏≤‡∏° Workflow (DAG)
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ analysis.ipynb            # Notebook ‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
‚îÇ   ‚îî‚îÄ‚îÄ out-*.ipynb               # Notebook ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (Auto-gen)
‚îú‚îÄ‚îÄ Dockerfile                    # ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Provider (Postgres, Papermill)
‚îî‚îÄ‚îÄ requirements.txt              # ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Python Libraries
üöÄ Getting Started
1. ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠ Build ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏° --wait ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Timeout ‡∏ä‡πà‡∏ß‡∏á‡∏•‡∏á Library):
astro dev start --wait 5m
Gemini said
‡∏ú‡∏°‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á README ‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô ‡πÇ‡∏î‡∏¢‡∏à‡∏±‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô Architecture Diagram ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£ Debug ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏à‡∏≠‡∏°‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏≠‡πà‡∏≤‡∏ô (‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡∏ï‡∏±‡∏ß‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï) ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö

üöÄ Astro Airflow Pipeline: Jupyter Notebook & Postgres Logging
‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Data Pipeline ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏ó‡∏µ‡πà‡∏ú‡∏™‡∏≤‡∏ô‡∏û‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á Airflow, Papermill, ‡πÅ‡∏•‡∏∞ Postgres ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏ö‡∏ö Parameterized

üõ†Ô∏è Tech Stack & Prerequisites
Astro CLI: ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Environment ‡∏ú‡πà‡∏≤‡∏ô Docker (Airflow 2.10+)

Papermill: ‡∏ï‡∏±‡∏ß‡∏Ç‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô Notebook ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ (Injection)

PostgreSQL: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö Metadata ‡πÅ‡∏•‡∏∞ Run Logs

Docker Desktop: ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á

üìÇ Project Structure
Plaintext
‚îú‚îÄ‚îÄ dags/
‚îÇ   ‚îî‚îÄ‚îÄ notebook_to_postgres.py   # ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏¥‡∏¢‡∏≤‡∏° Workflow (DAG)
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ analysis.ipynb            # Notebook ‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
‚îÇ   ‚îî‚îÄ‚îÄ out-*.ipynb               # Notebook ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (Auto-gen)
‚îú‚îÄ‚îÄ Dockerfile                    # ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Provider (Postgres, Papermill)
‚îî‚îÄ‚îÄ requirements.txt              # ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Python Libraries
üöÄ Getting Started
1. ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠ Build ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏° --wait ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Timeout ‡∏ä‡πà‡∏ß‡∏á‡∏•‡∏á Library):

PowerShell
astro dev start --wait 5m
Airflow Webserver: http://localhost:8080 (admin/admin)

Postgres Internal Port: 5432 (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Airflow)

Postgres External Port: 5435 (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö DBeaver/Datagrip)

2. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Database Connection
‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á "‡∏ó‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠" ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö Airflow (Admin > Connections) ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:
| Field | Value |
| :--- | :--- |
| Connection Id | my_postgres_db |
| Connection Type | Postgres |
| Host | postgres |
| Schema/Login/Pass | postgres |
| Port | 5432 |
üìù Workflow: ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Notebook ‡πÉ‡∏ô Pipeline
‡∏™‡πÄ‡∏ï‡πá‡∏õ 1: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Notebook ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£
‡πÄ‡∏õ‡∏¥‡∏î Notebook ‡πÉ‡∏ô VS Code

‡πÑ‡∏õ‡∏ó‡∏µ‡πà Cell ‡πÅ‡∏£‡∏Å -> ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Gear ‡∏´‡∏£‡∏∑‡∏≠ ... -> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Add Tag

‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ parameters (‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Enter ‡πÅ‡∏•‡∏∞ Save

‡∏™‡πÄ‡∏ï‡πá‡∏õ 2: ‡∏£‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á Trigger DAG ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

Papermill: ‡∏≠‡πà‡∏≤‡∏ô analysis.ipynb -> ‡∏â‡∏µ‡∏î‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô (ds) ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ -> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô include/out-YYYY-MM-DD.ipynb

Postgres: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á run_logs ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
üîß Troubleshooting (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤)
Error: ModuleNotFoundError: ‡∏´‡∏≤‡∏Å‡πÄ‡∏à‡∏≠‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡πÉ‡∏ô Dockerfile ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á RUN pip install ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏™‡∏±‡πà‡∏á astro dev stop ‡πÅ‡∏•‡∏∞ start ‡πÉ‡∏´‡∏°‡πà

Error: Broken DAG: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏∞‡∏Å‡∏î‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÉ‡∏ô Python (‡πÄ‡∏ä‡πà‡∏ô run_nb >> log_to_db) ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏õ‡πä‡∏∞

Error: Connection Refused: ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Airflow UI ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ Port 5435 ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏∑‡∏≠ 5432 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

Hard Reset: ‡∏´‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏•‡πâ‡∏≤‡∏á‡πÑ‡∏û‡πà:
astro dev kill
astro dev start

## üìä SQL Quick Reference
‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô Pipeline ‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô Database Tool (‡πÄ‡∏ä‡πà‡∏ô DBeaver) ‡πÇ‡∏î‡∏¢‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô Port `5435`

### 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```sql
SELECT * FROM run_logs 
ORDER BY run_date DESC;
### 2. ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
SELECT run_date, COUNT(*) as total_runs 
FROM run_logs 
GROUP BY run_date;
### 3. ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Log ‡πÄ‡∏Å‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
TRUNCATE TABLE run_logs;
